webpackJsonp([17],{1037:function(n,l,e){"use strict";var t=(e(0),e(15),e(85),e(78)),o=(e.n(t),e(215),e(465));e.d(l,"a",function(){return r});var u=(this&&this.__decorate,this&&this.__metadata,this&&this.__awaiter||function(n,l,e,t){return new(e||(e=Promise))(function(o,u){function i(n){try{a(t.next(n))}catch(n){u(n)}}function r(n){try{a(t.throw(n))}catch(n){u(n)}}function a(n){n.done?o(n.value):new e(function(l){l(n.value)}).then(i,r)}a((t=t.apply(n,l||[])).next())})}),i=this&&this.__generator||function(n,l){function e(n){return function(l){return t([n,l])}}function t(e){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,u&&(i=u[2&e[0]?"return":e[0]?"throw":"next"])&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[0,i.value]),e[0]){case 0:case 1:i=e;break;case 4:return r.label++,{value:e[1],done:!1};case 5:r.label++,u=e[1],e=[0];continue;case 7:e=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){r=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){r.label=e[1];break}if(6===e[0]&&r.label<i[1]){r.label=i[1],i=e;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(e);break}i[2]&&r.ops.pop(),r.trys.pop();continue}e=l.call(n,r)}catch(n){e=[6,n],u=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var o,u,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return{next:e(0),throw:e(1),return:e(2)}},r=function(){function n(n,l,e,t,o,u,i,r){this.navCtrl=n,this.bookService=l,this.modalCtrl=e,this.alertCtrl=t,this.menuCtrl=o,this.loadingCtrl=u,this.barcodeScanner=i,this.app=r,this.firstIn=!0,this.pageIndex=1,this.lastPageReached=!1,this.LastScrollTop=0}return n.prototype.ngOnInit=function(){this.user=JSON.parse(localStorage.getItem("currentUser"))},n.prototype.test=function(){this.bookList.nativeElement.scrollTop=0},n.prototype.bookListScroll=function(n){console.log(window.innerHeight);var l=window.innerHeight-44;(n.srcElement.scrollTop+l+30-this.LastScrollTop)/l>1&&!this.lastPageReached&&(this.scrollAddData(),this.LastScrollTop=n.srcElement.scrollTop+l)},n.prototype.scrollAddData=function(){return u(this,void 0,void 0,function(){var n,l,e=this;return i(this,function(t){switch(t.label){case 0:return this.pageIndex++,[4,this.bookService.getBooksByPage(this.pageIndex,o.a.pageCount)];case 1:return n=t.sent(),l=n.json(),l.forEach(function(n){e.books.push(n)}),l.length<o.a.pageCount&&(this.lastPageReached=!0),[2]}})})},n.prototype.onScroll=function(n){console.log(n)},n.prototype.ionViewWillEnter=function(){return u(this,void 0,void 0,function(){var n,l,e;return i(this,function(t){switch(t.label){case 0:return n=this.loadingCtrl.create({content:"Please wait..."}),this.firstIn&&(n.present(),this.firstIn=!1),this.bookInput.value?[4,this.bookService.getBooksByTitle(this.bookInput.value)]:[3,2];case 1:return l=t.sent(),[3,4];case 2:return e=this.pageIndex*o.a.pageCount,[4,this.bookService.getBooksByPage(1,e)];case 3:l=t.sent(),t.label=4;case 4:return this.books=l.json(),n.dismiss(),localStorage.getItem("scanFlag")||(localStorage.setItem("scanFlag","true"),localStorage.setItem("batchAddBooks","true")),[2]}})})},n.prototype.openMenu=function(){this.menuCtrl.toggle()},n.prototype.exit=function(){var n=this;this.menuCtrl.close().then(function(){n.navCtrl.pop()})},n.prototype.goToDetailPage=function(n){return u(this,void 0,void 0,function(){var l;return i(this,function(e){switch(e.label){case 0:return[4,this.bookService.getBookDetailInfo(n.ID)];case 1:return l=e.sent(),this.navCtrl.push("BookDetailComponent",{book:l.json()}),[2]}})})},n.prototype.showSettingModal=function(){this.modalCtrl.create("SettingComponent").present()},n.prototype.addBooks=function(){return u(this,void 0,void 0,function(){var n,l,e;return i(this,function(t){switch(t.label){case 0:return[4,this.bookService.scan()];case 1:return n=t.sent(),n.cancelled?[2]:n.cancelled||13!==n.text.length?[3,3]:[4,this.bookService.getBookInfoFromDouban(n.text)];case 2:return l=t.sent(),6e3===l.json().code?this.showError("豆瓣上找不到该书籍的信息，请人工输入. "):(e=this.bookService.transformBookInfo(l.json()),this.navCtrl.push("BookDetailComponent",{book:e,type:"addBook"}),this.menuCtrl.close()),[3,4];case 3:this.showError("你所扫描的并不是有效的ISBN码"),t.label=4;case 4:return[2]}})})},n.prototype.showError=function(n){this.alertCtrl.create({title:"错误",subTitle:n,buttons:["OK"]}).present()},n.prototype.doInfinite=function(n){return u(this,void 0,void 0,function(){var l,e,t=this;return i(this,function(u){switch(u.label){case 0:return this.pageIndex++,[4,this.bookService.getBooksByPage(this.pageIndex,o.a.pageCount)];case 1:return l=u.sent(),e=l.json(),e.forEach(function(n){t.books.push(n)}),e.length<o.a.pageCount&&(this.lastPageReached=!0),n.complete(),[2]}})})},n.prototype.isLastPageReached=function(){return this.lastPageReached},n.prototype.queryBooks=function(n){var l=this;n.target.value;t.Observable.of(n.target.value).debounceTime(500).distinctUntilChanged().switchMap(function(n){return n?(l.pageIndex=1,l.lastPageReached=!0,l.LastScrollTop=0,l.bookList.nativeElement.scrollTop=0,l.bookService.getBooksByTitle(n)):(l.pageIndex=1,l.lastPageReached=!1,l.LastScrollTop=0,l.bookList.nativeElement.scrollTop=0,l.bookService.getBooksByPage(1,o.a.pageCount))}).subscribe(function(n){l.books=n.json()})},n.prototype.getOrderBooksInfo=function(){return u(this,void 0,void 0,function(){var n,l,e;return i(this,function(t){switch(t.label){case 0:return n=JSON.parse(localStorage.getItem("currentUser")),[4,this.bookService.getOrderBooks(n.username)];case 1:return l=t.sent(),e=l.json(),[4,this.menuCtrl.close()];case 2:return t.sent(),this.navCtrl.push("BorrowRequestComponent",{books:e,type:"cancelbook"}),[2]}})})},n.prototype.getBorrowedBooks=function(){return u(this,void 0,void 0,function(){var n,l,e;return i(this,function(t){switch(t.label){case 0:return n=JSON.parse(localStorage.getItem("currentUser")),[4,this.bookService.getBorrowedBooks(n.username)];case 1:return l=t.sent(),e=l.json(),[4,this.menuCtrl.close()];case 2:return t.sent(),this.navCtrl.push("BorrowedListComponent",{books:e,type:"borrow"}),[2]}})})},n.prototype.getPaybackBooks=function(){return u(this,void 0,void 0,function(){var n,l,e;return i(this,function(t){switch(t.label){case 0:return n=JSON.parse(localStorage.getItem("currentUser")),[4,this.bookService.getPaybackBooks(n.username)];case 1:return l=t.sent(),e=l.json(),[4,this.menuCtrl.close()];case 2:return t.sent(),this.navCtrl.push("BorrowedListComponent",{books:e,type:"payback"}),[2]}})})},n.prototype.borrowRequest=function(){var n=this;this.prompt("借书申请","请输入要借书人的AD").then(function(l){return u(n,void 0,void 0,function(){var n,e;return i(this,function(t){switch(t.label){case 0:return l?[4,this.bookService.getOrderBooks(l.toLowerCase())]:[3,2];case 1:return n=t.sent(),[3,4];case 2:return[4,this.bookService.getOrderBooks()];case 3:n=t.sent(),t.label=4;case 4:return e=n.json(),[4,this.menuCtrl.close()];case 5:return t.sent(),this.navCtrl.push("BorrowRequestComponent",{books:e,type:"borrow"}),[2]}})})}).catch(function(n){console.log(n)})},n.prototype.payBackRequest=function(){var n=this;this.prompt("还书申请","请输入还书人的AD").then(function(l){return u(n,void 0,void 0,function(){var n,e;return i(this,function(t){switch(t.label){case 0:return l?[4,this.bookService.getBorrowedBooks(l.toLowerCase())]:[3,2];case 1:return n=t.sent(),[3,4];case 2:return[4,this.bookService.getBorrowedBooks()];case 3:n=t.sent(),t.label=4;case 4:return e=n.json(),[4,this.menuCtrl.close()];case 5:return t.sent(),this.navCtrl.push("BorrowRequestComponent",{books:e,type:"payback"}),[2]}})})}).catch(function(n){console.log(n)})},n.prototype.prompt=function(n,l){var e=this;return new Promise(function(t,o){e.alertCtrl.create({title:n,message:l,inputs:[{name:"username",placeholder:"Username"}],buttons:[{text:"取消",handler:function(n){console.log("Cancel clicked"),o()}},{text:"确定",handler:function(n){t(n.username)}}]}).present()})},n.prototype.addBook=function(){return u(this,void 0,void 0,function(){var n,l,e,t,o,u,r;return i(this,function(i){switch(i.label){case 0:n=["node","angular","html","oracle","css","apex","艺术","体育","篮球","足球","排球","JAVA","WEB","windows","novell","unix","硬体","offic","管理","数据库","企业","MONGO","VUE","经济","投资","金钱","apex","会计","文员","工程师"],l=0,i.label=1;case 1:return l<n.length?[4,this.bookService.getBooksFromDoubanByName(n[l])]:[3,9];case 2:e=i.sent(),t=e.json().books,o=0,i.label=3;case 3:if(!(o<t.length))return[3,8];u=this.bookService.transformBookInfo(t[o]),i.label=4;case 4:return i.trys.push([4,6,,7]),[4,this.bookService.addBook(u)];case 5:return i.sent(),[3,7];case 6:return r=i.sent(),console.log(u.ISBN13),[3,7];case 7:return o++,[3,3];case 8:return l++,[3,1];case 9:return[2]}})})},n}()},1135:function(n,l,e){"use strict";function t(n){return u["ɵvid"](2,[u["ɵqud"](402653184,1,{backdrop:0}),(n()(),u["ɵeld"](0,null,null,1,"div",[["class","menu-inner"]],null,null,null,null,null)),u["ɵncd"](null,0),(n()(),u["ɵeld"](0,null,null,1,"ion-backdrop",[["disable-activated",""],["role","presentation"],["tappable",""]],null,null,null,null,null)),u["ɵdid"](16384,[[1,4]],0,i.a,[u.ElementRef,u.Renderer],null,null)],null,null)}function o(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,4,"ion-menu",[["role","navigation"]],null,null,null,t,v)),u["ɵdid"](245760,null,2,r.a,[a.a,u.ElementRef,c.c,s.b,u.Renderer,d.a,f.a,p.a,h.a],null,null),u["ɵqud"](335544320,1,{menuContent:0}),u["ɵqud"](335544320,2,{menuNav:0}),u["ɵprd"](6144,null,b.b,null,[r.a])],function(n,l){n(l,1,0)},null)}var u=e(0),i=e(56),r=e(219),a=e(55),c=e(3),s=e(4),d=e(18),f=e(10),p=e(9),h=e(8),b=e(54);e.d(l,"b",function(){return v}),l.a=t;var m=[],v=u["ɵcrt"]({encapsulation:2,styles:m,data:{}});u["ɵccf"]("ion-menu",r.a,o,{content:"content",id:"id",type:"type",enabled:"enabled",side:"side",swipeEnabled:"swipeEnabled",persistent:"persistent",maxEdgeStart:"maxEdgeStart"},{ionDrag:"ionDrag",ionOpen:"ionOpen",ionClose:"ionClose"},["*"])},1136:function(n,l,e){"use strict";function t(n){return u["ɵvid"](2,[(n()(),u["ɵeld"](0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),u["ɵdid"](278528,null,0,i.l,[u.IterableDiffers,u.KeyValueDiffers,u.ElementRef,u.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u["ɵncd"](null,0),u["ɵncd"](null,1),u["ɵncd"](null,2),(n()(),u["ɵeld"](0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),u["ɵdid"](278528,null,0,i.l,[u.IterableDiffers,u.KeyValueDiffers,u.ElementRef,u.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),u["ɵncd"](null,3)],function(n,l){var e=l.component;n(l,1,0,"toolbar-background","toolbar-background-"+e._mode);n(l,6,0,"toolbar-content","toolbar-content-"+e._mode)},null)}function o(n){return u["ɵvid"](0,[(n()(),u["ɵeld"](0,null,null,1,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,t,s)),u["ɵdid"](49152,null,0,r.a,[a.c,u.ElementRef,u.Renderer],null,null)],null,function(n,l){n(l,0,0,u["ɵnov"](l,1)._sbPadding)})}var u=e(0),i=e(11),r=e(29),a=e(3);e.d(l,"b",function(){return s}),l.a=t;var c=[],s=u["ɵcrt"]({encapsulation:2,styles:c,data:{}});u["ɵccf"]("ion-toolbar",r.a,o,{color:"color",mode:"mode"},{},["[menuToggle],ion-buttons[left]","ion-buttons[start]","ion-buttons[end],ion-buttons[right]","*"])},1179:function(n,l,e){"use strict";e(0),e(1037),e(15),e(970);e.d(l,"a",function(){return t});var t=(this&&this.__decorate,function(){function n(){}return n}())},1180:function(n,l,e){"use strict";function t(n){return i["ɵvid"](0,[(n()(),i["ɵeld"](0,null,null,5,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(n,l,e){var t=!0,o=n.component;if("ionInfinite"===l){t=o.doInfinite(e)!==!1&&t}return t},null,null)),i["ɵdid"](1196032,null,0,r.a,[a.a,i.NgZone,i.ElementRef,c.a],null,{ionInfinite:"ionInfinite"}),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,s.a,s.b)),i["ɵdid"](114688,null,0,d.a,[r.a,f.c],null,null),(n()(),i["ɵted"](null,["\n  "]))],function(n,l){n(l,4,0)},function(n,l){n(l,3,0,i["ɵnov"](l,4).inf.state)})}function o(n){return i["ɵvid"](0,[i["ɵqud"](402653184,1,{mySearchbar:0}),i["ɵqud"](402653184,2,{mainContent:0}),i["ɵqud"](402653184,3,{bookInput:0}),i["ɵqud"](402653184,4,{bookList:0}),(n()(),i["ɵeld"](0,null,null,122,"ion-menu",[["role","navigation"]],null,null,null,p.a,p.b)),i["ɵdid"](245760,null,2,h.a,[b.a,i.ElementRef,f.c,m.b,i.Renderer,v.a,k.a,c.a,g.a],{content:[0,"content"]},null),i["ɵqud"](335544320,5,{menuContent:0}),i["ɵqud"](335544320,6,{menuNav:0}),i["ɵprd"](6144,null,_.b,null,[h.a]),(n()(),i["ɵted"](0,["\n  "])),(n()(),i["ɵeld"](0,null,0,10,"ion-header",[],null,null,null,null,null)),i["ɵdid"](16384,null,0,y.a,[f.c,i.ElementRef,i.Renderer,[2,R.a]],null,null),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,6,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,w.a,w.b)),i["ɵdid"](49152,null,0,B.a,[f.c,i.ElementRef,i.Renderer],null,null),(n()(),i["ɵted"](3,["\n      "])),(n()(),i["ɵeld"](0,null,3,2,"ion-title",[],null,null,null,C.a,C.b)),i["ɵdid"](49152,null,0,I.a,[f.c,i.ElementRef,i.Renderer,[2,B.a],[2,E.a]],null,null),(n()(),i["ɵted"](0,["Pages"])),(n()(),i["ɵted"](3,["\n    "])),(n()(),i["ɵted"](null,["\n  "])),(n()(),i["ɵted"](0,["\n  "])),(n()(),i["ɵeld"](0,null,0,103,"ion-content",[],[[2,"statusbar-padding",null]],null,null,S.a,S.b)),i["ɵdid"](4374528,[[5,4]],0,a.a,[f.c,m.b,c.a,i.ElementRef,i.Renderer,g.a,v.a,i.NgZone,[2,R.a],[2,L.a]],null,null),(n()(),i["ɵted"](1,["\n    "])),(n()(),i["ɵeld"](0,null,1,6,"div",[["class","avatar-img"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),i["ɵted"](null,["",""])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](1,["\n    "])),(n()(),i["ɵeld"](0,null,1,91,"ion-list",[],null,null,null,null,null)),i["ɵdid"](16384,null,0,P.a,[f.c,i.ElementRef,i.Renderer,m.b,k.a,c.a],null,null),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.getOrderBooksInfo()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,7,{contentLabel:0}),i["ɵqud"](603979776,8,{_buttons:1}),i["ɵqud"](603979776,9,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","archive"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[9,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        已预约图书\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.getBorrowedBooks()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,10,{contentLabel:0}),i["ɵqud"](603979776,11,{_buttons:1}),i["ɵqud"](603979776,12,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","book"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[12,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        已借图书\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.getPaybackBooks()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,13,{contentLabel:0}),i["ɵqud"](603979776,14,{_buttons:1}),i["ɵqud"](603979776,15,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[15,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        已还图书\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.addBooks()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,16,{contentLabel:0}),i["ɵqud"](603979776,17,{_buttons:1}),i["ɵqud"](603979776,18,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","briefcase"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[18,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        新增图书(管理员)\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.borrowRequest()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,19,{contentLabel:0}),i["ɵqud"](603979776,20,{_buttons:1}),i["ɵqud"](603979776,21,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","folder"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[21,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        借书申请(管理员)\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.payBackRequest()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,22,{contentLabel:0}),i["ɵqud"](603979776,23,{_buttons:1}),i["ɵqud"](603979776,24,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","document"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[24,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        还书(管理员)\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.showSettingModal()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,25,{contentLabel:0}),i["ɵqud"](603979776,26,{_buttons:1}),i["ɵqud"](603979776,27,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","settings"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[27,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        设置(管理员)\n      "])),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,9,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.exit()!==!1&&t}return t},D.a,D.b)),i["ɵdid"](1097728,null,3,x.a,[A.a,f.c,i.ElementRef,i.Renderer,[2,T.a]],null,null),i["ɵqud"](335544320,28,{contentLabel:0}),i["ɵqud"](603979776,29,{_buttons:1}),i["ɵqud"](603979776,30,{_icons:1}),i["ɵdid"](16384,null,0,O.a,[],null,null),(n()(),i["ɵted"](2,["\n        "])),(n()(),i["ɵeld"](0,null,0,1,"ion-icon",[["color","primary"],["item-left",""],["name","exit"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](147456,[[30,4]],0,M.a,[f.c,i.ElementRef,i.Renderer],{color:[0,"color"],name:[1,"name"]},null),(n()(),i["ɵted"](2,["\n        退出\n      "])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](1,["\n  "])),(n()(),i["ɵted"](0,["\n"])),(n()(),i["ɵted"](null,["\n"])),(n()(),i["ɵeld"](0,null,null,28,"ion-header",[],null,null,null,null,null)),i["ɵdid"](16384,null,0,y.a,[f.c,i.ElementRef,i.Renderer,[2,R.a]],null,null),(n()(),i["ɵted"](null,["\n  "])),(n()(),i["ɵeld"](0,null,null,24,"ion-navbar",[["class","toolbar"],["hideBackButton",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,N.a,N.b)),i["ɵdid"](49152,null,0,E.a,[g.a,[2,R.a],[2,L.a],f.c,i.ElementRef,i.Renderer],{hideBackButton:[0,"hideBackButton"]},null),(n()(),i["ɵted"](3,["\n    "])),(n()(),i["ɵeld"](0,null,3,2,"ion-title",[],null,null,null,C.a,C.b)),i["ɵdid"](49152,null,0,I.a,[f.c,i.ElementRef,i.Renderer,[2,B.a],[2,E.a]],null,null),(n()(),i["ɵted"](0,["\n      图书馆\n    "])),(n()(),i["ɵted"](3,["\n    "])),(n()(),i["ɵeld"](0,null,1,7,"ion-buttons",[["start",""]],null,null,null,null,null)),i["ɵdid"](16384,null,1,j.a,[f.c,i.ElementRef,i.Renderer,[2,B.a],[2,E.a]],null,null),i["ɵqud"](603979776,31,{_buttons:1}),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.openMenu()!==!1&&t}return t},F.a,F.b)),i["ɵdid"](1097728,[[31,4]],0,V.a,[[8,""],f.c,i.ElementRef,i.Renderer],null,null),(n()(),i["ɵted"](0,["\n          菜单\n      "])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](3,["\n    "])),(n()(),i["ɵeld"](0,null,2,7,"ion-buttons",[["end",""]],null,null,null,null,null)),i["ɵdid"](16384,null,1,j.a,[f.c,i.ElementRef,i.Renderer,[2,B.a],[2,E.a]],null,null),i["ɵqud"](603979776,32,{_buttons:1}),(n()(),i["ɵted"](null,["\n      "])),(n()(),i["ɵeld"](0,null,null,2,"button",[["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.exit()!==!1&&t}return t},F.a,F.b)),i["ɵdid"](1097728,[[32,4]],0,V.a,[[8,""],f.c,i.ElementRef,i.Renderer],null,null),(n()(),i["ɵted"](0,["\n          退出\n      "])),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵted"](3,["\n  "])),(n()(),i["ɵted"](null,["\n"])),(n()(),i["ɵted"](null,["\n"])),(n()(),i["ɵeld"](0,null,null,14,"ion-content",[["class","page"]],[[2,"statusbar-padding",null]],null,null,S.a,S.b)),i["ɵdid"](4374528,[[2,4],["maincontent",4]],0,a.a,[f.c,m.b,c.a,i.ElementRef,i.Renderer,g.a,v.a,i.NgZone,[2,R.a],[2,L.a]],null,null),(n()(),i["ɵted"](1,["\n  "])),(n()(),i["ɵeld"](0,null,1,1,"ion-searchbar",[],[[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ionInput"]],function(n,l,e){var t=!0,o=n.component;if("ionInput"===l){t=o.queryBooks(e)!==!1&&t}return t},U.a,U.b)),i["ɵdid"](1294336,[[3,4],["bookInput",4]],0,$.a,[f.c,m.b,i.ElementRef,i.Renderer,[2,K.h]],null,{ionInput:"ionInput"}),(n()(),i["ɵted"](1,["\n  "])),(n()(),i["ɵeld"](0,[[4,0],["booklist",1]],1,4,"div",[["class","book-list"]],null,null,null,null,null)),(n()(),i["ɵted"](null,["\n    "])),(n()(),i["ɵeld"](0,null,null,1,"sg-book-list",[],null,[[null,"onClick"]],function(n,l,e){var t=!0,o=n.component;if("onClick"===l){t=o.goToDetailPage(e)!==!1&&t}return t},J.a,J.b)),i["ɵdid"](49152,null,0,z.a,[],{books:[0,"books"]},{onClick:"onClick"}),(n()(),i["ɵted"](null,["\n  "])),(n()(),i["ɵted"](1,["\n  "])),(n()(),i["ɵand"](16777216,null,1,1,null,t)),i["ɵdid"](16384,null,0,H.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),i["ɵted"](1,["\n"])),(n()(),i["ɵted"](null,["\n"]))],function(n,l){var e=l.component;n(l,5,0,i["ɵnov"](l,159));n(l,45,0,"primary","archive");n(l,56,0,"primary","book");n(l,67,0,"primary","bookmark");n(l,78,0,"primary","briefcase");n(l,89,0,"primary","folder");n(l,100,0,"primary","document");n(l,111,0,"primary","settings");n(l,122,0,"primary","exit");n(l,132,0,""),n(l,162,0),n(l,167,0,e.books),n(l,171,0,!e.isLastPageReached())},function(n,l){var e=l.component;n(l,13,0,i["ɵnov"](l,14)._sbPadding),n(l,22,0,i["ɵnov"](l,23).statusbarPadding),n(l,27,0,e.user.avatarUrl),n(l,30,0,e.user.username),n(l,44,0,i["ɵnov"](l,45)._hidden),n(l,55,0,i["ɵnov"](l,56)._hidden),n(l,66,0,i["ɵnov"](l,67)._hidden),n(l,77,0,i["ɵnov"](l,78)._hidden),n(l,88,0,i["ɵnov"](l,89)._hidden),n(l,99,0,i["ɵnov"](l,100)._hidden),n(l,110,0,i["ɵnov"](l,111)._hidden),n(l,121,0,i["ɵnov"](l,122)._hidden),n(l,131,0,i["ɵnov"](l,132)._hidden,i["ɵnov"](l,132)._sbPadding),n(l,158,0,i["ɵnov"](l,159).statusbarPadding),n(l,161,0,i["ɵnov"](l,162)._animated,i["ɵnov"](l,162)._value,i["ɵnov"](l,162)._isActive,i["ɵnov"](l,162)._showCancelButton,i["ɵnov"](l,162)._shouldAlignLeft,i["ɵnov"](l,162)._isFocus)})}function u(n){return i["ɵvid"](0,[(n()(),i["ɵeld"](0,null,null,1,"sg-book-library",[],null,null,null,o,nn)),i["ɵdid"](114688,null,0,q.a,[L.a,Y.a,Z.a,Q.a,b.a,G.a,W.a,g.a],null,null)],function(n,l){n(l,1,0)},null)}var i=e(0),r=e(87),a=e(20),c=e(9),s=e(462),d=e(107),f=e(3),p=e(1135),h=e(219),b=e(55),m=e(4),v=e(18),k=e(10),g=e(8),_=e(54),y=e(38),R=e(6),w=e(1136),B=e(29),C=e(47),I=e(39),E=e(25),S=e(40),L=e(16),P=e(46),q=e(1037),D=e(66),x=e(22),A=e(21),T=e(45),O=e(53),M=e(41),N=e(44),j=e(84),F=e(34),V=e(23),U=e(151),$=e(76),K=e(19),J=e(983),z=e(965),H=e(11),Y=e(215),Z=e(156),Q=e(86),G=e(104),W=e(85);e.d(l,"a",function(){return ln});var X=[],nn=i["ɵcrt"]({encapsulation:2,styles:X,data:{}}),ln=i["ɵccf"]("sg-book-library",q.a,u,{},{},[])},815:function(n,l,e){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t=e(0),o=e(1179),u=e(11),i=e(19),r=e(210),a=e(970),c=e(447),s=e(448),d=e(449),f=e(450),p=e(451),h=e(452),b=e(453),m=e(454),v=e(455),k=e(1180),g=e(1037),_=e(72);e.d(l,"BookLibraryComponentModuleNgFactory",function(){return w});var y=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var e in l)l.hasOwnProperty(e)&&(n[e]=l[e])};return function(l,e){function t(){this.constructor=l}n(l,e),l.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),R=function(n){function l(l){return n.call(this,l,[c.a,s.a,d.a,f.a,p.a,h.a,b.a,m.a,v.a,k.a],[])||this}return y(l,n),Object.defineProperty(l.prototype,"_NgLocalization_8",{get:function(){return null==this.__NgLocalization_8&&(this.__NgLocalization_8=new u.a(this.parent.get(t.LOCALE_ID))),this.__NgLocalization_8},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"_ɵi_9",{get:function(){return null==this.__ɵi_9&&(this.__ɵi_9=new i.a),this.__ɵi_9},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"_FormBuilder_10",{get:function(){return null==this.__FormBuilder_10&&(this.__FormBuilder_10=new i.b),this.__FormBuilder_10},enumerable:!0,configurable:!0}),l.prototype.createInternal=function(){return this._CommonModule_0=new u.d,this._ɵba_1=new i.c,this._FormsModule_2=new i.d,this._ReactiveFormsModule_3=new i.e,this._IonicModule_4=new r.b,this._BookListComponentModule_5=new a.a,this._IonicPageModule_6=new r.c,this._BookLibraryComponentModule_7=new o.a,this._LAZY_LOADED_TOKEN_11=g.a,this._BookLibraryComponentModule_7},l.prototype.getInternal=function(n,l){return n===u.d?this._CommonModule_0:n===i.c?this._ɵba_1:n===i.d?this._FormsModule_2:n===i.e?this._ReactiveFormsModule_3:n===r.b?this._IonicModule_4:n===a.a?this._BookListComponentModule_5:n===r.c?this._IonicPageModule_6:n===o.a?this._BookLibraryComponentModule_7:n===u.e?this._NgLocalization_8:n===i.a?this._ɵi_9:n===i.b?this._FormBuilder_10:n===_.d?this._LAZY_LOADED_TOKEN_11:l},l.prototype.destroyInternal=function(){},l}(t["ɵNgModuleInjector"]),w=new t.NgModuleFactory(R,o.a)},965:function(n,l,e){"use strict";var t=e(0);e.d(l,"a",function(){return o});var o=(this&&this.__decorate,this&&this.__metadata,function(){function n(){this.showAddBookInput=!1,this.showPayBackDate=!1,this.showActualBackDate=!1,this.onClick=new t.EventEmitter,this.onInputChange=new t.EventEmitter,this.addBookQty=1,this.addBookQty=1}return n.prototype.ionViewDidLoad=function(){console.log("book list did load")},n.prototype.ionViewWillEnter=function(){console.log("book list will enter"),this.addBookQty=1},n.prototype.goToDetailPage=function(n){this.onClick.emit(n)},n.prototype.inputChange=function(n){this.onInputChange.emit(n.target.value)},n.prototype.trackByBooks=function(n,l){return l.ISBN13},n}())},970:function(n,l,e){"use strict";e(0),e(15),e(965);e.d(l,"a",function(){return t});var t=(this&&this.__decorate,function(){function n(){}return n}())},983:function(n,l,e){"use strict";function t(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,null,null,1,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["可借数量: ",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.QTY)})}function o(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,null,null,3,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["\n          录入数量:"])),(n()(),s["ɵeld"](0,null,null,0,"input",[["style","text-indent: 5px;"],["type","text"],["value","1"]],null,[[null,"input"]],function(n,l,e){var t=!0,o=n.component;if("input"===l){t=o.inputChange(e)!==!1&&t}return t},null,null)),(n()(),s["ɵted"](null,["\n        "]))],null,null)}function u(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,null,null,2,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["借书期限至: ",""])),s["ɵppd"](2)],null,function(n,l){n(l,1,0,s["ɵunv"](l,1,0,n(l,2,0,s["ɵnov"](l.parent.parent,0),l.parent.context.$implicit.SHOULD_PAYBACK_DATE,"y-MM-dd")))})}function i(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,null,null,2,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["归还时间: ",""])),s["ɵppd"](2)],null,function(n,l){n(l,1,0,s["ɵunv"](l,1,0,n(l,2,0,s["ɵnov"](l.parent.parent,0),l.parent.context.$implicit.ACTUAL_PAYBACK_DATE,"y-MM-dd")))})}function r(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,null,null,36,"button",[["class","book-list"]],null,[[null,"click"]],function(n,l,e){var t=!0,o=n.component;if("click"===l){t=o.goToDetailPage(n.context.$implicit)!==!1&&t}return t},null,null)),(n()(),s["ɵted"](null,["\n    "])),(n()(),s["ɵeld"](0,null,null,3,"div",[["class","book-image"]],null,null,null,null,null)),(n()(),s["ɵted"](null,["\n      "])),(n()(),s["ɵeld"](0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),s["ɵted"](null,["\n    "])),(n()(),s["ɵted"](null,["\n    "])),(n()(),s["ɵeld"](0,null,null,28,"div",[["class","book-info"]],null,null,null,null,null)),(n()(),s["ɵted"](null,["\n      "])),(n()(),s["ɵeld"](0,null,null,25,"div",[["class","book-info-style"]],null,null,null,null,null)),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵeld"](0,null,null,1,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["书名: ",""])),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵeld"](0,null,null,1,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["作者: ",""])),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵeld"](0,null,null,1,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["价格: ",""])),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵeld"](0,null,null,1,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["出版信息: ",""])),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵand"](16777216,null,null,1,null,t)),s["ɵdid"](16384,null,0,d.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]
},null),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵand"](16777216,null,null,1,null,o)),s["ɵdid"](16384,null,0,d.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵand"](16777216,null,null,1,null,u)),s["ɵdid"](16384,null,0,d.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),s["ɵted"](null,["\n        "])),(n()(),s["ɵand"](16777216,null,null,1,null,i)),s["ɵdid"](16384,null,0,d.k,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),s["ɵted"](null,["\n      "])),(n()(),s["ɵted"](null,["\n    "])),(n()(),s["ɵted"](null,["\n  "]))],function(n,l){var e=l.component;n(l,24,0,!e.showAddBookInput&&!e.showPayBackDate&&!e.showActualBackDate),n(l,27,0,e.showAddBookInput),n(l,30,0,e.showPayBackDate),n(l,33,0,e.showActualBackDate)},function(n,l){n(l,4,0,l.context.$implicit.IMAGE),n(l,12,0,l.context.$implicit.TITLE),n(l,15,0,l.context.$implicit.AUTHOR),n(l,18,0,l.context.$implicit.PRICE),n(l,21,0,l.context.$implicit.PUBLISHER)})}function a(n){return s["ɵvid"](0,[s["ɵpid"](0,d.m,[s.LOCALE_ID]),(n()(),s["ɵeld"](0,null,null,6,"div",[],null,null,null,null,null)),(n()(),s["ɵted"](null,["\n  "])),(n()(),s["ɵand"](16777216,null,null,1,null,r)),s["ɵdid"](802816,null,0,d.n,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),s["ɵted"](null,["\n  "])),(n()(),s["ɵeld"](0,null,null,0,"div",[["class","line"]],null,null,null,null,null)),(n()(),s["ɵted"](null,["\n"])),(n()(),s["ɵted"](null,["\n"]))],function(n,l){n(l,4,0,l.component.books)},null)}function c(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,null,null,1,"sg-book-list",[],null,null,null,a,h)),s["ɵdid"](49152,null,0,f.a,[],null,null)],null,null)}var s=e(0),d=e(11),f=e(965);e.d(l,"b",function(){return h}),l.a=a;var p=[],h=s["ɵcrt"]({encapsulation:2,styles:p,data:{}});s["ɵccf"]("sg-book-list",f.a,c,{books:"books",showAddBookInput:"showAddBookInput",showPayBackDate:"showPayBackDate",showActualBackDate:"showActualBackDate"},{onClick:"onClick",onInputChange:"onInputChange"},[])}});
//# sourceMappingURL=D:\gary\github\MiApp\www\build\17.main.js.map